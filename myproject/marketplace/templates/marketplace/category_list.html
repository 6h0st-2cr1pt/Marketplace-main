{% extends 'base.html' %}
{% load static %}

{% block title %}Categories - Local Product Marketplace{% endblock %}

{% block content %}
<div class="container py-5">
    <h1 class="mb-4">Product Categories</h1>
    <div class="row g-4">
        {% for category in categories %}
        <div class="col-md-4">
            <a href="{% url 'marketplace:category_detail' category.slug %}" class="text-decoration-none">
                <div class="card h-100 border-0 shadow-sm">
                    <!-- Debug info -->
                    <div style="display: none;">Category name: "{{ category.name }}"</div>
                    
                    {% if category.image %}
                        <img src="{{ category.image.url }}" class="card-img-top" alt="{{ category.name }}" style="height: 200px; object-fit: cover;">
                    {% elif category.image_url %}
                        <img src="{{ category.image_url }}" class="card-img-top" alt="{{ category.name }}" style="height: 200px; object-fit: cover;">
                    {% elif 'Handicraft' in category.name %}
                        <img src="https://images.unsplash.com/photo-1615640325967-af4cfa4c0c6a?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OHx8aGFuZGljcmFmdHxlbnwwfHwwfHx8MA%3D%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif category.name == 'Fresh Fruits' %}
                        <img src="https://images.unsplash.com/photo-1610832958506-aa56368176cf?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8ZnJ1aXRzfGVufDB8fDB8fHww"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif category.name == 'Fresh Vegetables' %}
                        <img src="https://images.unsplash.com/photo-1610348725531-843dff563e2c?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mzl8fHZlZ2V0YWJsZXN8ZW58MHx8MHx8fDA%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Art' in category.name or 'Design' in category.name or 'Arts' in category.name %}
                        <img src="https://images.unsplash.com/photo-1579783902614-a3fb3927b6a5?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8YXJ0fGVufDB8fDB8fHww"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Organic' in category.name %}
                        <img src="https://images.unsplash.com/photo-1674479018975-74f6139844f8?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8b3JnYW5pYyUyMHByb2R1Y3R8ZW58MHx8MHx8fDA%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Service' in category.name %}
                        <img src="https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=800&auto=format&fit=crop&q=60"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Decor' in category.name or 'Home' in category.name %}
                        <img src="https://images.unsplash.com/photo-1556911220-bff31c812dba?w=800&auto=format&fit=crop&q=60"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Bakery' in category.name %}
                        <img src="https://images.unsplash.com/photo-1608198093002-ad4e005484ec?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mjd8fGJha2VyeXxlbnwwfHwwfHx8MA%3D%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Dairy' in category.name %}
                        <img src="https://plus.unsplash.com/premium_photo-1663127123513-a11369f67c8c?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8ODZ8fGRhaXJ5fGVufDB8fDB8fHww"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Handmade' in category.name %}
                         <img src="https://images.unsplash.com/photo-1527383214149-cb7be04ae387?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTd8fGhhbmRtYWRlfGVufDB8fDB8fHww"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Cosmetics' in category.name %}
                         <img src="https://images.unsplash.com/photo-1696497327736-1b9184fd3a16?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTA4fHxuYXR1cmFsJTIwY29zbWV0aWN8ZW58MHx8MHx8fDA%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Preserves' in category.name %}
                         <img src="https://images.unsplash.com/photo-1637792451203-89f43c2862dc?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fHByZXNlcnZlJTIwZm9vZHxlbnwwfHwwfHx8MA%3D%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Textiles' in category.name %}
                         <img src="https://images.unsplash.com/photo-1562869929-bda0650edb1f?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTl8fHRleHRpbGV8ZW58MHx8MHx8fDA%3D"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% elif 'Woodwork' in category.name %}
                         <img src="https://images.unsplash.com/photo-1655149588581-49191c89e470?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTczfHx3b29kZW4lMjBwcm9kdWN0fGVufDB8fDB8fHww"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% else %}
                        <img src="{% static 'images/category-placeholder.svg' %}"
                             class="card-img-top" alt="{{ category.name }}"
                             style="height: 200px; object-fit: cover;">
                    {% endif %}
                    <div class="card-body text-center">
                        <h5 class="card-title text-dark">{{ category.name }}</h5>
                        <p class="card-text text-muted">{{ category.description|default:"Browse products in this category" }}</p>
                    </div>
                </div>
            </a>
        </div>
        {% empty %}
        <div class="col-12">
            <p class="text-center text-muted">No categories available.</p>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %} 